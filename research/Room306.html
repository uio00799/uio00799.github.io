<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROOM 306 - SQL Debug Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            min-height: 100vh;
            color: #00ff41;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .room-header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        .room-number {
            font-size: 80px;
            font-weight: bold;
            color: #00ff41;
            text-shadow: 0 0 20px #00ff41, 0 0 40px #00ff41;
            animation: glow 2s ease-in-out infinite;
            letter-spacing: 10px;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px #00ff41, 0 0 40px #00ff41; }
            50% { text-shadow: 0 0 30px #00ff41, 0 0 60px #00ff41, 0 0 80px #00ff41; }
        }

        .room-subtitle {
            font-size: 24px;
            color: #0ff;
            margin-top: 10px;
            text-shadow: 0 0 10px #0ff;
        }

        .door-animation {
            width: 300px;
            height: 400px;
            margin: 30px auto;
            position: relative;
            perspective: 1000px;
        }

        .door {
            width: 100%;
            height: 100%;
            border: 4px solid #00ff41;
            background: linear-gradient(180deg, #1a1a2e 0%, #0f0f1e 100%);
            border-radius: 10px;
            position: relative;
            transform-style: preserve-3d;
            animation: doorOpen 3s ease-in-out infinite;
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.5);
        }

        @keyframes doorOpen {
            0%, 100% { transform: rotateY(0deg); }
            50% { transform: rotateY(-45deg); }
        }

        .door-handle {
            width: 60px;
            height: 15px;
            background: gold;
            position: absolute;
            right: 20px;
            top: 50%;
            border-radius: 10px;
            box-shadow: 0 0 10px gold;
        }

        .door-number {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 48px;
            font-weight: bold;
            color: gold;
            text-shadow: 0 0 20px gold;
        }

        .challenge-container {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #00ff41;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.3);
        }

        .challenge-header {
            font-size: 28px;
            color: #ff0;
            margin-bottom: 20px;
            text-align: center;
            text-shadow: 0 0 10px #ff0;
        }

        .challenge-round {
            margin-bottom: 40px;
            opacity: 0.3;
            transition: all 0.3s;
        }

        .challenge-round.active {
            opacity: 1;
        }

        .challenge-round.completed {
            opacity: 0.5;
            border-left: 4px solid #0f0;
        }

        .round-title {
            font-size: 22px;
            color: #0ff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .round-number {
            background: #0ff;
            color: #000;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .code-block {
            background: #1a1a1a;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 20px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #fff;
            position: relative;
            overflow-x: auto;
        }

        .code-label {
            color: #ff6b6b;
            font-size: 12px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .error-line {
            background: rgba(255, 0, 0, 0.2);
            border-left: 3px solid #f00;
            padding-left: 10px;
        }

        .problem-description {
            background: rgba(255, 107, 107, 0.1);
            border-left: 4px solid #ff6b6b;
            padding: 15px;
            margin: 15px 0;
            color: #ffb3b3;
        }

        .hint-section {
            background: rgba(255, 255, 0, 0.1);
            border-left: 4px solid #ff0;
            padding: 15px;
            margin: 15px 0;
            color: #ffff99;
        }

        .solution-input {
            width: 100%;
            background: #1a1a1a;
            border: 2px solid #00ff41;
            border-radius: 5px;
            padding: 15px;
            color: #00ff41;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 15px 0;
            resize: vertical;
            min-height: 100px;
        }

        .solution-input:focus {
            outline: none;
            box-shadow: 0 0 15px rgba(0, 255, 65, 0.5);
        }

        .btn {
            background: linear-gradient(135deg, #00ff41, #00cc33);
            border: none;
            padding: 12px 30px;
            color: #000;
            font-weight: bold;
            font-size: 16px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0, 255, 65, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 255, 65, 0.5);
        }

        .btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            font-weight: bold;
            display: none;
        }

        .feedback.success {
            background: rgba(0, 255, 65, 0.2);
            border: 2px solid #0f0;
            color: #0f0;
            display: block;
        }

        .feedback.error {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid #f00;
            color: #ff6b6b;
            display: block;
        }

        .reward-container {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border: 3px solid #ff0;
            border-radius: 15px;
            padding: 40px;
            margin: 30px 0;
            text-align: center;
            display: none;
            animation: rewardAppear 1s ease-out;
        }

        @keyframes rewardAppear {
            0% { transform: scale(0) rotate(-180deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .reward-container.show {
            display: block;
        }

        .reward-title {
            font-size: 36px;
            color: #000;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .reward-code {
            font-size: 72px;
            color: #ff0000;
            font-weight: bold;
            text-shadow: 3px 3px 0 #000, -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000;
            letter-spacing: 20px;
            margin: 20px 0;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .reward-instruction {
            font-size: 20px;
            color: #000;
            background: rgba(255, 255, 255, 0.3);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .terminal-hint {
            color: #0ff;
            font-size: 18px;
            margin-top: 10px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border: 2px solid #00ff41;
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff41, #0ff);
            width: 0%;
            transition: width 0.5s;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.8);
        }

        .keyword {
            color: #569cd6;
        }

        .string {
            color: #ce9178;
        }

        .comment {
            color: #6a9955;
        }

        .function {
            color: #dcdcaa;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="room-header">
            <div class="room-number">ROOM 306</div>
            <div class="room-subtitle">üîì SQL DEBUG CHALLENGE üîì</div>
        </div>

        <div class="door-animation">
            <div class="door">
                <div class="door-number">306</div>
                <div class="door-handle"></div>
            </div>
        </div>

        <div class="challenge-container">
            <div class="challenge-header">‚ö†Ô∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î SQL ‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‚ö†Ô∏è</div>
            
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <!-- Round 1 -->
            <div class="challenge-round active" id="round1">
                <div class="round-title">
                    <div class="round-number">1</div>
                    <span>WHERE Clause Missing Quotes</span>
                </div>

                <div class="problem-description">
                    <strong>üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</strong> Query ‡∏ô‡∏µ‡πâ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ 'John' ‡πÅ‡∏ï‡πà‡∏£‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ<br>
                    <strong>üí° ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ quotes ‡πÉ‡∏ô WHERE clause
                </div>

                <div class="code-block">
                    <div class="code-label">‚ùå ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</div>
                    <pre><code><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> users
<span class="keyword">WHERE</span> <span class="error-line">username = John;</span></code></pre>
                </div>

                <div class="hint-section">
                    <strong>üí≠ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong><br>
                    ‚Ä¢ ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô string/text ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢ single quotes (' ') ‡∏´‡∏£‡∏∑‡∏≠ double quotes (" ")<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: WHERE column_name = 'value'<br>
                    ‚Ä¢ ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà quotes SQL ‡∏à‡∏∞‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤ John ‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠ column ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
                </div>

                <textarea class="solution-input" id="solution1" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå SQL ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
SELECT * FROM users
WHERE username = 'John';"></textarea>

                <button class="btn" onclick="checkSolution(1)">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                <div class="feedback" id="feedback1"></div>
            </div>

            <!-- Round 2 -->
            <div class="challenge-round" id="round2">
                <div class="round-title">
                    <div class="round-number">2</div>
                    <span>Missing JOIN Condition</span>
                </div>

                <div class="problem-description">
                    <strong>üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</strong> Query ‡∏ô‡∏µ‡πâ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏° join ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡πÅ‡∏ï‡πà‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î<br>
                    <strong>üí° ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡∏Ç‡∏≤‡∏î‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ join ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î Cartesian Product
                </div>

                <div class="code-block">
                    <div class="code-label">‚ùå ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</div>
                    <pre><code><span class="keyword">SELECT</span> orders.order_id, customers.customer_name
<span class="keyword">FROM</span> orders, customers;</code></pre>
                </div>

                <div class="hint-section">
                    <strong>üí≠ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong><br>
                    ‚Ä¢ ‡∏Å‡∏≤‡∏£ join ‡∏ï‡∏≤‡∏£‡∏≤‡∏á 2 ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç (ON clause) ‡∏ß‡πà‡∏≤‡∏à‡∏∞ match ‡∏Å‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á<br>
                    ‚Ä¢ ‡πÉ‡∏ä‡πâ INNER JOIN ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà comma (,) ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á<br>
                    ‚Ä¢ ‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏∏‡∏ß‡πà‡∏≤ column ‡πÑ‡∏´‡∏ô‡∏à‡∏≤‡∏Å table ‡πÑ‡∏´‡∏ô‡∏à‡∏∞‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: FROM table1 INNER JOIN table2 ON table1.id = table2.foreign_id
                </div>

                <textarea class="solution-input" id="solution2" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå SQL ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
SELECT orders.order_id, customers.customer_name
FROM orders
INNER JOIN customers ON orders.customer_id = customers.customer_id;"></textarea>

                <button class="btn" onclick="checkSolution(2)" disabled id="btn2">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                <div class="feedback" id="feedback2"></div>
            </div>

            <!-- Round 3 -->
            <div class="challenge-round" id="round3">
                <div class="round-title">
                    <div class="round-number">3</div>
                    <span>Aggregate Function with GROUP BY</span>
                </div>

                <div class="problem-description">
                    <strong>üêõ ‡∏õ‡∏±‡∏ç‡∏´‡∏≤:</strong> Query ‡∏ô‡∏µ‡πâ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î error<br>
                    <strong>üí° ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏:</strong> ‡πÉ‡∏ä‡πâ aggregate function ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ GROUP BY
                </div>

                <div class="code-block">
                    <div class="code-label">‚ùå ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î:</div>
                    <pre><code><span class="keyword">SELECT</span> customer_id, <span class="error-line"><span class="function">COUNT</span>(order_id)</span>
<span class="keyword">FROM</span> orders;</code></pre>
                </div>

                <div class="hint-section">
                    <strong>üí≠ ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥:</strong><br>
                    ‚Ä¢ ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ aggregate functions (COUNT, SUM, AVG, MAX, MIN) ‡∏Å‡∏±‡∏ö column ‡∏≠‡∏∑‡πà‡∏ô<br>
                    ‚Ä¢ ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ GROUP BY ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å SQL ‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏≤‡∏° column ‡πÉ‡∏î<br>
                    ‚Ä¢ Column ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô aggregate function ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô GROUP BY<br>
                    ‚Ä¢ ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: SELECT column1, COUNT(column2) FROM table GROUP BY column1
                </div>

                <textarea class="solution-input" id="solution3" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå SQL ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÅ‡∏•‡πâ‡∏ß‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á:
SELECT customer_id, COUNT(order_id)
FROM orders
GROUP BY customer_id;"></textarea>

                <button class="btn" onclick="checkSolution(3)" disabled id="btn3">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö</button>
                <div class="feedback" id="feedback3"></div>
            </div>
        </div>

        <div class="reward-container" id="rewardContainer">
            <div class="reward-title">üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢! ‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß! üéâ</div>
            <div class="reward-code">AND</div>
            <div class="reward-instruction">
                üîë ‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì!<br>
                <div class="terminal-hint">üìç ‡∏ô‡∏≥‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ "AND" ‡πÑ‡∏õ‡πÉ‡∏™‡πà‡∏ó‡∏µ‡πà <strong>Terminal-F3</strong></div>
                <br>
                üí° <strong>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°:</strong><br>
                ‚Ä¢ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏à‡∏≤‡∏Å <a href="https://www.w3schools.com/sql/" target="_blank" style="color: #000; text-decoration: underline;">W3Schools SQL Tutorial</a><br>
                ‚Ä¢ ‡∏ù‡∏∂‡∏Å‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô SQL ‡∏ó‡∏µ‡πà <a href="https://sqliteonline.com/" target="_blank" style="color: #000; text-decoration: underline;">SQLite Online</a><br>
                ‚Ä¢ ‡∏®‡∏∂‡∏Å‡∏©‡∏≤ SQL best practices ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô SQL Injection
            </div>
        </div>
    </div>

    <script>
        let completedRounds = 0;
        const totalRounds = 3;

        const solutions = {
            1: {
                keywords: ['username', '=', "'john'", 'users'],
                requiredPatterns: [/'john'/i, /where\s+username\s*=/i]
            },
            2: {
                keywords: ['inner join', 'join', 'on', 'customer_id'],
                requiredPatterns: [/join\s+customers/i, /on\s+.*customer_id/i]
            },
            3: {
                keywords: ['group by', 'customer_id', 'count'],
                requiredPatterns: [/group\s+by\s+customer_id/i, /count\s*\(/i]
            }
        };

        function checkSolution(round) {
            const input = document.getElementById('solution' + round).value.trim().toLowerCase();
            const feedback = document.getElementById('feedback' + round);
            const solution = solutions[round];

            if (input.length < 10) {
                feedback.className = 'feedback error';
                feedback.textContent = '‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏Ñ‡πâ‡∏î SQL ‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå';
                return;
            }

            let isCorrect = true;
            let missingElements = [];

            // Check for required patterns
            for (let pattern of solution.requiredPatterns) {
                if (!pattern.test(input)) {
                    isCorrect = false;
                }
            }

            // Check for keywords
            for (let keyword of solution.keywords) {
                if (!input.includes(keyword.toLowerCase())) {
                    missingElements.push(keyword);
                }
            }

            if (isCorrect && missingElements.length === 0) {
                feedback.className = 'feedback success';
                feedback.textContent = '‚úÖ ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á! ‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
                
                document.getElementById('round' + round).classList.add('completed');
                document.getElementById('round' + round).classList.remove('active');
                
                completedRounds++;
                updateProgress();

                if (round < totalRounds) {
                    setTimeout(() => {
                        document.getElementById('round' + (round + 1)).classList.add('active');
                        document.getElementById('btn' + (round + 1)).disabled = false;
                    }, 1000);
                } else {
                    setTimeout(() => {
                        document.getElementById('rewardContainer').classList.add('show');
                        document.querySelector('.challenge-container').style.opacity = '0.5';
                    }, 1500);
                }
            } else {
                feedback.className = 'feedback error';
                let hint = '‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ';
                
                if (missingElements.length > 0) {
                    hint += '‡∏Ñ‡∏∏‡∏ì‡∏•‡∏∑‡∏°: ' + missingElements.join(', ');
                } else {
                    hint += '‡∏•‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
                }
                
                feedback.textContent = hint;
            }
        }

        function updateProgress() {
            const percentage = (completedRounds / totalRounds) * 100;
            document.getElementById('progressFill').style.width = percentage + '%';
        }
    </script>
</body>
</html>
