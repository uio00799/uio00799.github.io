<!DOCTYPE html>
<html lang="th">
<meta charset="utf-8">
<title>ROOM 305 – Send Unlock</title>
<body>
  <h1>ROOM 305</h1>
  <input id="code" placeholder="รหัส เช่น CSIT">
  <button id="send">ส่งรหัส</button>
  <p id="status"></p>

<script>
const API = "http://127.0.0.1:3000/api/unlock";

document.getElementById('send').onclick = async () => {
  const code = document.getElementById('code').value.trim();
  if (!code) return;
  try {
    const res = await fetch(API, {
      method:'POST',
      headers:{ 'Content-Type':'application/json' },
      body: JSON.stringify({ code })
    });
    const data = await res.json();
    document.getElementById('status').textContent = data.ok ? "ส่งสำเร็จ" : ("พัง: " + (data.error||res.status));
  } catch (e) {
    document.getElementById('status').textContent = "เชื่อม localhost ไม่ได้ (เช็คว่า server.js รันอยู่ไหม)";
  }
};
</script>
</body>
</html>
