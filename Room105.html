<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Room 105 — A.I. Laboratory (Binary Puzzle)</title>
<meta name="description" content="ห้อง 105 — A.I. Laboratory (ห้องปริศนา Binary). ACCESS DENIED — DECRYPT TO CONTINUE." />
<style>
  :root{
    --bg:#071018; --panel:#0c1622; --edge:#17364d; --glow:#00eaff; --ok:#00ffb0; --err:#ff4d5a; --txt:#d3ecff; --muted:#91abc4;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(1400px 900px at 75% -15%, #0f2232 0%, var(--bg) 52%) fixed;
    color:var(--txt); font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace; overflow-x:hidden;
  }
  /* binary rain */
  .rain{position:fixed; inset:0; pointer-events:none; opacity:.14; mix-blend-mode:screen}
  .col{position:absolute; top:-120vh; width:22px; height:300vh; white-space:pre; color:var(--glow); text-shadow:0 0 12px rgba(0,234,255,.55); font-size:13px; line-height:1.15; animation:fall linear infinite}
  @keyframes fall{to{transform:translateY(165vh)}}

  .container{max-width:1200px; margin:0 auto; padding:28px 16px 72px}
  .title{display:flex; gap:12px; align-items:center; margin:6px 0 14px}
  .badge{padding:6px 10px; border:1px solid var(--glow); border-radius:10px; color:#aef6ff; letter-spacing:.12em; font-size:12px; box-shadow:0 0 10px rgba(0,234,255,.25) inset}
  h1{margin:0; font-size:22px; letter-spacing:.06em; text-shadow:0 0 18px rgba(0,234,255,.35)}
  .desc{border:1px solid var(--edge); background:linear-gradient(180deg,#0c1723,#0b141e); border-radius:14px; padding:14px 16px; color:#cfe8ff; line-height:1.55}
  .mono{font-family:inherit}

  .wrap{display:grid; grid-template-columns: 1.2fr .9fr; gap:16px; margin-top:16px}
  @media (max-width:980px){ .wrap{grid-template-columns:1fr} }

  .panel{border:1px solid var(--edge); background:var(--panel); border-radius:14px; box-shadow:0 18px 40px rgba(0,0,0,.35), inset 0 0 20px rgba(0,234,255,.04); overflow:hidden}
  .head{display:flex; align-items:center; justify-content:space-between; background:linear-gradient(180deg,#0f1a28,#0c1622); border-bottom:1px solid var(--edge); padding:10px 12px}
  .win{display:flex; gap:8px}
  .dot{width:10px; height:10px; border-radius:99px; box-shadow:0 0 10px currentColor}
  .dot.r{color:#ff6d6d}.dot.y{color:#ffd45a}.dot.g{color:#76ffb7}
  .title2{font-size:13px; letter-spacing:.09em; color:#9fdcff}
  .body{padding:14px}

  /* status line */
  .status{display:inline-block; padding:10px 12px; border-radius:10px; font-weight:700; letter-spacing:.12em; text-shadow:0 0 10px currentColor}
  .denied{color:#ffd9dd; border:1px solid #61212c; background:linear-gradient(180deg,#1a0f12,#150c10)}
  .ok{color:#d9fff2; border:1px solid #1e6a54; background:linear-gradient(180deg,#0c1a16,#0a1512)}
  .blink{animation:blink 1.1s steps(2,end) infinite}
  @keyframes blink{50%{opacity:.45}}

  /* grid A–X */
  .grid24{display:grid; grid-template-columns:repeat(6,1fr); gap:10px; margin-top:12px}
  .tile{
    border:1px solid var(--edge); border-radius:12px; padding:10px; background:#0a1520;
    display:grid; gap:7px; cursor:pointer; transition:.16s; position:relative;
  }
  .tile:hover{transform:translateY(-1px); box-shadow:0 8px 18px rgba(0,234,255,.08)}
  .tag{font-size:12px; letter-spacing:.12em; color:#9ad6ff}
  .bin{font-size:14px; color:#aaf7ff; text-shadow:0 0 10px rgba(0,234,255,.2)}
  .picked::after{
    content:"SELECTED"; position:absolute; top:8px; right:8px; font-size:10px; letter-spacing:.14em; color:#b7ffe7;
    border:1px solid #2b7a67; padding:2px 6px; border-radius:8px; background:rgba(0,255,176,.08)
  }

  .cmd{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-top:10px}
  .btn{border:1px solid var(--edge); background:#0b1824; color:#e2f9ff; padding:9px 12px; border-radius:10px; letter-spacing:.04em; font-size:13px; cursor:pointer; transition:.18s}
  .btn:hover{transform:translateY(-1px); box-shadow:0 6px 16px rgba(0,234,255,.08)}
  input[type="text"]{flex:1; min-width:220px; background:#07111a; border:1px solid var(--edge); color:#e9fbff; padding:10px 12px; border-radius:8px; outline:none}

  .hint p{margin:8px 0; color:#cfe7ff}
  .small{color:var(--muted); font-size:12px}

  .note{background:#0a1520; border:1px dashed var(--edge); border-radius:12px; padding:12px}
  .note h4{margin:0 0 6px; color:#9eefff; letter-spacing:.08em}
  .file{display:flex; gap:10px; flex-wrap:wrap; align-items:center; margin-top:8px}
  .kbd{border:1px solid var(--edge); border-radius:8px; padding:4px 8px; font-size:12px; color:#bfefff; background:#07121a}

  .successBox{margin-top:10px}
  .footer{margin-top:28px; text-align:center; color:var(--muted); font-size:12px; letter-spacing:.04em}
</style>
</head>
<body>
  <!-- binary rain -->
  <div id="rain" class="rain" aria-hidden="true"></div>

  <div class="container">
    <div class="title">
      <span class="badge">ROOM 105 — A.I. LAB</span>
      <h1>ห้องปริศนา Binary</h1>
    </div>

    <div class="desc">
      ในห้องเต็มไปด้วยหน้าจอและเส้นสายไฟสีฟ้าเรืองแสง บนจอหลักมีชุดข้อมูลตัวเลขฐานสอง (<span class="mono">Binary</span>) กระพริบต่อเนื่อง พร้อมกล่องข้อความ:<br/>
      <span class="mono" style="display:inline-block;margin-top:6px">[ACCESS DENIED – DECRYPT TO CONTINUE]</span><br/>
      รูปแบบการเล่น: ผู้เล่นต้องใช้ <strong>ข้อมูลจากสองไฟล์พร้อมกัน</strong> — (1) <em>In-Game Console</em> ในห้องคอม 24 เครื่อง (A–X) และ (2) <em>Out-of-Game Note</em> ซึ่งอธิบายการเข้ารหัส A=1 ด้วยเลขฐานสอง 5 บิต เพื่อนำไปประกอบเป็นคำเป้าหมาย
    </div>

    <div class="wrap">
      <!-- LEFT: In-Game Console -->
      <section class="panel" aria-label="In-Game Console">
        <div class="head">
          <div class="win"><span class="dot r"></span><span class="dot y"></span><span class="dot g"></span></div>
          <div class="title2">IN-GAME CONSOLE — WORKSTATIONS A–X (5-bit Binary)</div>
        </div>
        <div class="body">
          <span id="status" class="status denied blink">ACCESS DENIED — DECRYPT TO CONTINUE</span>

          <!-- 24 PCs A–X -->
          <div id="grid" class="grid24" role="grid" aria-label="Workstation Grid"></div>

          <!-- Selection & Submit -->
          <div class="cmd">
            <span class="small">ลำดับที่เลือก:</span>
            <input id="seq" type="text" placeholder="จะเติมอัตโนมัติเมื่อคลิก A–X ตามลำดับ…"/>
            <button id="clear" class="btn">ล้าง</button>
            <button id="check" class="btn">ยืนยันการถอดรหัส</button>
          </div>

          <div id="result" class="small"></div>

          <div id="success" class="successBox" style="display:none">
            <span class="status ok">DECRYPT SUCCESSFUL</span>
            <div class="mono" style="margin-top:8px">
              KEYWORD: <strong style="color:var(--ok)">ALGORITHM</strong>
            </div>
            <div class="small" style="margin-top:8px">
              ระบบแจ้งเตือน: ส่งคำว่า <strong>ALGORITHM</strong> ไปยัง <em>ACTIVITY PLAZA CONSOLE</em> (ลานกิจกรรม) เพื่อปลดล็อกขั้นถัดไป
            </div>
          </div>
        </div>
      </section>

      <!-- RIGHT: Out-of-Game Note -->
      <section class="panel" aria-label="Out-of-Game Note">
        <div class="head">
          <div class="win"><span class="dot r"></span><span class="dot y"></span><span class="dot g"></span></div>
          <div class="title2">OUT-OF-GAME NOTE — DECODE GUIDE (A=1 → 5-bit)</div>
        </div>
        <div class="body">
          <div class="note">
            <h4>ไฟล์: decode_map.txt</h4>
            <p>กฎเข้ารหัสของห้องนี้ใช้ <strong>เลขฐานสอง 5 บิต</strong> แทนดัชนีตัวอักษร (A=1, B=2, …, Z=26) แต่ในห้องนี้มีเครื่องจริงเพียง A–X (1–24) เท่านั้น</p>
            <ul class="small" style="margin:6px 0 0 18px">
              <li>แปลงเลขดัชนีเป็น 5 บิต เช่น 1 → <span class="mono">00001</span>, 12 → <span class="mono">01100</span>, 7 → <span class="mono">00111</span></li>
              <li>ตัวอย่าง: <strong>A = 00001</strong>, <strong>L = 01100</strong> (ต่อให้ครบจะเกิดเป็นคำหนึ่งคำ)</li>
              <li>รวมตัวอักษรตามตำแหน่งที่เลือกจาก In-Game Console ให้ครบตามลำดับ</li>
            </ul>
          </div>

          <div class="hint" style="margin-top:12px">
            <div class="head" style="border:none;background:none;padding:0"><div class="title2">HINT CONSOLE</div></div>
            <div class="body" style="padding:0">
              <p id="h1">[Hint 1] มองหาตัวอักษรที่ดัชนีอยู่ระหว่าง 1–24 เท่านั้น (A–X) เพราะในห้องมีเครื่องเพียง 24 ตัว</p>
              <p id="h2" style="display:none">[Hint 2] เรียงลำดับเครื่องตามบิต 5 ตัวที่ขึ้นบนหน้าจอ: <span class="mono">00001</span> ตรงกับ A, <span class="mono">01100</span> ตรงกับ L, … เมื่อเรียงตามโน้ต คุณควรได้คำภาษาอังกฤษ</p>
              <p id="h3" style="display:none">[Hint 3] คำสุดท้ายยาว 9 ตัวอักษร หมายถึง “กระบวนวิธี” ในวิทยาการคอมพิวเตอร์</p>
              <div class="file">
                <button id="nextHint" class="btn">เปิดคำใบ้ถัดไป</button>
                <button id="resetHint" class="btn">ซ่อนคำใบ้</button>
                <span class="kbd">Binary = 5 บิต (A=1)</span>
                <span class="kbd">เลือกให้ครบตามลำดับ</span>
              </div>
            </div>
          </div>

          <div class="note" style="margin-top:12px">
            <h4>ไฟล์: plaza_instructions.txt</h4>
            <p class="small">เมื่อถอดรหัสเสร็จสิ้น ระบบจะออกคำว่า <strong>ALGORITHM</strong>. ให้นำคำนี้ไปป้อนที่ <em>ACTIVITY PLAZA CONSOLE</em> (ลานกิจกรรม) เพื่อปลดล็อกด่านถัดไป</p>
          </div>
        </div>
      </section>
    </div>

    <div class="footer">
      © Room 105 — A.I. Laboratory · Binary Challenge · In-Game & Out-of-Game Dual Play
    </div>
  </div>

<script>
  /* ===== Binary Rain ===== */
  (function rain(){
    const root = document.getElementById('rain');
    const cols = Math.max(12, Math.floor(window.innerWidth/26));
    for(let i=0;i<cols;i++){
      const d=document.createElement('div'); d.className='col';
      d.style.left=(i*26)+'px';
      d.style.animationDuration=(8+Math.random()*8)+'s';
      d.style.animationDelay=(Math.random()*-10)+'s';
      d.textContent=Array.from({length:220},()=>Math.random()>0.5?'1':'0').join('\n');
      root.appendChild(d);
    }
  })();

  /* ===== A–X grid (A=1..X=24), 5-bit binary (padded) ===== */
  const A_CODE = 'A'.charCodeAt(0);
  const LETTERS = Array.from({length:24},(_,i)=>String.fromCharCode(A_CODE+i)); // A..X
  const indexOf = ch => ch.charCodeAt(0)-A_CODE+1; // A->1
  const to5bit = n => n.toString(2).padStart(5,'0');

  const grid = document.getElementById('grid');
  const seqInput = document.getElementById('seq');
  const statusEl = document.getElementById('status');
  const resultEl = document.getElementById('result');
  const clearBtn = document.getElementById('clear');
  const checkBtn = document.getElementById('check');
  const successBox = document.getElementById('success');

  const TARGET = "ALGORITHM"; // คำตอบที่ต้องได้จากการกดเรียง
  let picked = []; // อักขระลำดับที่เลือก

  // สร้างไทล์ A–X
  function buildGrid(){
    grid.innerHTML='';
    LETTERS.forEach(letter=>{
      const idx = indexOf(letter);
      const tile = document.createElement('button');
      tile.className='tile';
      tile.setAttribute('role','gridcell');
      tile.setAttribute('aria-label', `Station ${letter} (${to5bit(idx)})`);
      tile.innerHTML = `
        <div class="tag">${letter} <span class="small">= ${idx}</span></div>
        <div class="bin">${to5bit(idx)}</div>
      `;
      tile.addEventListener('click', ()=>{
        picked.push(letter);
        tile.classList.add('picked');
        seqInput.value = picked.join('');
        cue(`เลือก: ${letter} → ลำดับปัจจุบัน ${seqInput.value}`);
      });
      grid.appendChild(tile);
    });
  }

  function cue(msg){
    resultEl.textContent = msg;
  }
  function setDenied(text="ACCESS DENIED — DECRYPT TO CONTINUE"){
    statusEl.textContent = text;
    statusEl.classList.add('denied','blink');
    statusEl.classList.remove('ok');
    successBox.style.display='none';
  }
  function setOk(){
    statusEl.textContent = "DECRYPT SUCCESSFUL";
    statusEl.classList.remove('denied','blink');
    statusEl.classList.add('ok');
    successBox.style.display='block';
  }

  clearBtn.addEventListener('click', ()=>{
    picked = [];
    seqInput.value='';
    document.querySelectorAll('.tile.picked').forEach(t=>t.classList.remove('picked'));
    setDenied();
    cue("รีเซ็ตลำดับแล้ว");
  });

  checkBtn.addEventListener('click', ()=>{
    const user = (seqInput.value||'').trim().toUpperCase();
    if(!user){ setDenied(); cue("ยังไม่ได้เลือกตัวอักษร"); return; }

    // อนุญาตตรวจได้ 2 แบบ: (1) กดเรียงบนกระดานเป็น 'ALGORITHM' (2) พิมพ์คำว่า ALGORITHM โดยตรง
    if(user === TARGET){
      setOk();
      cue('คำตอบถูกต้อง: "ALGORITHM"');
    }else{
      setDenied("ACCESS DENIED — TRY AGAIN");
      cue("ยังไม่ถูกต้อง ลองอาศัยโน้ตนอกเกม (A=1 → 5 บิต) จับคู่กับหน้าจอแต่ละเครื่อง");
    }
  });
11271518920813
  buildGrid();

  /* ===== Hints ===== */
  const h1=document.getElementById('h1'), h2=document.getElementById('h2'), h3=document.getElementById('h3');
  document.getElementById('nextHint').addEventListener('click', ()=>{
    if(h2.style.display!=='block'){ h2.style.display='block'; return; }
    if(h3.style.display!=='block'){ h3.style.display='block'; return; }
  });
  document.getElementById('resetHint').addEventListener('click', ()=>{
    h2.style.display='none'; h3.style.display='none';
  });
</script>
</body>
</html>
